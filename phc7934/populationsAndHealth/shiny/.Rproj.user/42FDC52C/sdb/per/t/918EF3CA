{
    "contents" : "wd <- \"C:/Users/BrewJR/Documents/uf/phc7934/populationsAndHealth/allCountries\"\nsetwd(wd)\n\n# GET COUNTRY ABBREVIATIONS\nsetwd(\"./births\")\ndf <- data.frame(gsub(\".Births.txt\", \"\", dir()))\nnames(df) <- \"ab\"\n\nsetwd(wd)\n# GET COUNTRY NAMES\n# df$countries <- c(\"Australia\",\n#                \"Austria\",\n#                \"Belarus\",\n#                \"Belgium\",\n#                \"Bulgaria\",\n#                \"Canada\",\n#                \"Czech Republic\",\n#                \"Chile\",\n#                \"Denmark\",\n#                \"Estonia\",\n#                \"Finland\",\n#                \"France\",\n#                \"Germany\",\n#                \"Hungary\",\n#                \"Iceland\",\n#                \"Ireland\",\n#                \"Israel\",\n#                \"Italy\",\n#                \"Japan\",\n#                \"Latvia\",\n#                \"Lithuania\",\n#                \"Luxembourg\",\n#                \"Netherlands\",\n#                \"New Zealand\",\n#                \"Norway\",\n#                \"Poland\",\n#                \"Portugal\",\n#                \"Russia\",\n#                \"Slovakia\",\n#                \"Slovenia\",\n#                \"Spain\",\n#                \"Sweden\",\n#                \"Switzerland\",\n#                \"Taiwan\",\n#                \"U.K.\",\n#                \"U.S.A.\",\n#                \"Ukraine\")\n\nMortFun <- function(country, bar = TRUE, line = TRUE){\n  setwd(wd)\n  \n  \n  setwd(\"./births\")\n  b <- read.table(paste0(country, \".Births.txt\"),header=TRUE,skip=2)\n  \n  setwd(wd)\n  setwd(\"./deaths\")\n  d <- read.table(paste0(country, \".Deaths_1x1.txt\"),header=TRUE,skip=2)\n  \n  setwd(wd)\n  setwd(\"./population\")\n  p <- read.table(paste0(country, \".Population.txt\"),header=TRUE,skip=2)\n  \n  setwd(wd)\n  \n  #######\n  # SINCE B IS ON A NICE 1 YEAR = 1 ROW SYSTEM, ADD TO IT\n  #######\n  # populations\n  b$p <- NA\n  for (i in b$Year){\n    b$p[which(b$Year == i)] <-\n      sum(p$Total[which(p$Year == i)])\n  }\n  \n  b$d <- NA\n  for (i in b$Year){\n    b$d[which(b$Year == i)] <-\n      sum(d$Total[which(d$Year == i)])\n  }\n  \n  #######\n  # ADD A B VARIABLE (births) and a Y VARIABLE (year)\n  #######\n  b$b <- b$Total\n  b$y <- b$Year\n  \n  #######\n  # NAME THE DATAFRAME X\n  #######\n  x <- b\n  \n  # MAKE BIRTH RATE AND DEATH RATE PER 1000\n  x$br <- x$b / x$p * 1000\n  x$dr <- x$d / x$p * 1000\n  \n  #############\n  # PLOT\n  #############\n  if(bar){\n    barplot(x$b, border = FALSE,\n            names.arg = x$y,\n            #las = 3,\n            cex.names = 0.7)\n    barplot(x$d, border = NA, col = adjustcolor(\"red\", alpha.f=0.4), add = T)\n    \n    legend (x = \"topright\",\n            fill = c(\"grey\", adjustcolor(\"red\", alpha.f = 0.4)),\n            border = FALSE,\n            bty = \"n\",\n            legend = c(\"Births\", \"Deaths\"),\n            title = \"Events per year\",\n            cex = 0.7)\n  }else if(line){\n    plot(x$y, x$br, ylim = c(0,max(x$br[which(is.finite(x$br))], na.rm=T)), \n         type = \"l\", col = \"grey\",\n         ylab = \"Rate per 1,000\", \n         xlab = \"Year\")\n    lines(x$y, x$dr, col = \"red\")\n    legend(x = \"bottomleft\",\n           lty = 1,\n           col = c(\"grey\", \"red\"),\n           legend = c(\"Birth\", \"Death\"),\n           title = \"Rate per 1,000\",\n           cex = 0.8)\n    \n\n  }\n\n}\n\n\n# \n# # MAKE A FUNCTION TO SHOW DEATH RATE BY AGE BY YEAR\n# AgeFun <- function(year){\n#   barplot(d$Total[which(d$Year == year)] / \n#             )\n# }\n# AgeFun(1935)\n# \n# for (i in 1933:2000){\n#   AgeFun(i)\n#   Sys.sleep(0.2)\n# }\n",
    "created" : 1409546677176.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1314555284",
    "id" : "918EF3CA",
    "lastKnownWriteTime" : 1409547746,
    "path" : "~/uf/phc7934/populationsAndHealth/shiny/function.R",
    "project_path" : "function.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}